//
//  COUIAnimationRouter.m
//  COLibrary
//
//  Created by Cenker Ozkurt on 9/30/13.
//  Copyright (c) 2013 Cenker Ozkurt. All rights reserved.
//

#import "COSingleton.h"
#import "COUIAnimationController.h"
#import "COUIAnimationRouter.h"

////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
#pragma mark - Private
////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

@interface COUIAnimationRouter ()

@property (atomic, strong) NSMutableSet *animationControllers;

@end

////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
#pragma mark - COUIAnimationRouter
////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

@implementation COUIAnimationRouter

CO_SYNTHESIZE_SINGLETON(COUIAnimationRouter, sharedInstance, ^(COUIAnimationRouter *sharedInstance) { return [sharedInstance init]; } );

////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
#pragma mark - Init Methods
////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

- (id)init
{
    self = [super init];
    if (self)
    {
        self.animationControllers = [[NSMutableSet alloc] init];
    }
    
    return self;
}

////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
#pragma mark - registerController
////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

- (void)registerController:(COUIAnimationRouter *)controller
{
    [self.animationControllers addObject:controller];
    
    NSLog(@"Registered Flow Controller : %@", [controller class]);
}

////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
#pragma mark - performEvent
////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

- (void)performEvent:(NSString *)event
{
    for (COUIAnimationController *wfc in self.animationControllers)
    {
        [wfc playAnimationForEvent:event];
    }
}

@end
